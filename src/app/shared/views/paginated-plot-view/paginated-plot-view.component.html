<div class="p-4">
  <h2 class="text-xl font-semibold mb-4">Common View Time Transfer Link</h2>

  <div class="mb-4">
    <label for="dataLimit" class="mr-2 font-medium">Show last:</label>
    <select id="dataLimit"
            [(ngModel)]="dataLimit"
            (change)="updateChartData()"
            class="border px-2 py-1">
      <option *ngFor="let limit of dataLimits" [value]="limit">
        {{ limit === -1 ? 'All' : limit }}
      </option>
    </select>
  </div>

  <ng-container *ngIf="isBrowser && chartData; else loadingOrSSR">
    <canvas baseChart
            [data]="chartData"
            [options]="chartOptions"
            [type]="'line'">
    </canvas>
  </ng-container>

  <ng-template #loadingOrSSR>
    <div class="flex items-center justify-center h-64 bg-gray-100 rounded">
      <p class="text-gray-500 italic">
        <span *ngIf="!isBrowser">Chart will load when page is fully loaded...</span>
        <span *ngIf="isBrowser && !chartData">Loading chart data...</span>
      </p>
    </div>
  </ng-template>
</div>
